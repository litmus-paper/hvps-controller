<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HVPS Controller</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>High Voltage Power Supply Controller</h1>
        </header>

        <main>
            <section class="connection-panel">
                <h2>Connection</h2>
                <button id="btnConnect" class="btn btn-primary">Connect to Device</button>
                <div id="portStatus" class="status-indicator" aria-live="polite">Disconnected</div>
            </section>

            <section class="readings-panel">
                <h2>Live Readings</h2>
                <div class="readings-grid">
                    <div class="reading-item">
                        <label for="actVoltage">Voltage</label>
                        <div id="actVoltage" class="reading-value" aria-live="polite">--.- V</div>
                    </div>
                    <div class="reading-item">
                        <label for="actCurrent">Current</label>
                        <div id="actCurrent" class="reading-value" aria-live="polite">--.- A</div>
                    </div>
                    <div class="reading-item">
                        <label for="actTemp">Temperature</label>
                        <div id="actTemp" class="reading-value" aria-live="polite">-- Â°C</div>
                    </div>
                </div>
            </section>

            <section class="controls-panel">
                <h2>Control Settings</h2>
                <div class="controls-grid">
                    <div class="control-group">
                        <label for="inVoltage">Voltage Setpoint</label>
                        <div class="input-group">
                            <input type="number" 
                                   id="inVoltage" 
                                   min="0" 
                                   max="120" 
                                   step="1" 
                                   placeholder="0"
                                   aria-describedby="voltage-help">
                            <span class="unit">kV</span>
                            <button id="btnSetVoltage" class="btn btn-secondary">Set</button>
                        </div>
                        <small id="voltage-help" class="help-text">Range: 0 - 120 kV</small>
                    </div>
                    
                    <div class="control-group">
                        <label for="inCurrent">Current Limit</label>
                        <div class="input-group">
                            <input type="number" 
                                   id="inCurrent" 
                                   min="0" 
                                   max="10" 
                                   step="1" 
                                   placeholder="0.0"
                                   aria-describedby="current-help">
                            <span class="unit">mA</span>
                            <button id="btnSetCurrent" class="btn btn-secondary">Set</button>
                        </div>
                        <small id="current-help" class="help-text">Range: 0 - 10 mA</small>
                    </div>
                </div>
            </section>

            <section class="emergency-panel">
                <button id="btnEstop" class="btn btn-emergency" aria-describedby="estop-help">
                    <span class="estop-text">E-STOP</span>
                </button>
                <small id="estop-help" class="help-text">Emergency stop - resets the power supply</small>
                <div id="estopStatus" aria-live="assertive"></div>
            </section>
        </main>

        <footer>
            <div id="debugLog" class="debug-log" aria-live="polite"></div>
        </footer>
    </div>

    <script src="js/serialService.js"></script>
    <script src="js/rxParser.js"></script>
    <script src="js/txScheduler.js"></script>
    <script src="js/store.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/app.js"></script>
</body>
</html>